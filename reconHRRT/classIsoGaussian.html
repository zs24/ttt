<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: IsoGaussian class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>IsoGaussian Class Reference</h1><code>#include &lt;<a class="el" href="IsoGaussian_8hpp-source.html">IsoGaussian.hpp</a>&gt;</code>
<p>
<p>Inheritance diagram for IsoGaussian:
<p><center><img src="classIsoGaussian.png" usemap="#IsoGaussian_map" border="0" alt=""></center>
<map name="IsoGaussian_map">
<area href="classResolutionFunction.html" alt="ResolutionFunction" shape="rect" coords="0,0,119,24">
</map>
<a href="classIsoGaussian-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#a0">IsoGaussian</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#a1">~IsoGaussian</a> ()</td></tr>

<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#b0">calculateCodeIndexR</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#b1">calculateKernelR</a> (Params &amp;params)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#b2">calculateCodeIndexU</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classIsoGaussian.html#b3">calculateKernelU</a> (Params &amp;params)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class describes the fixed resolution function 
<p>

<p>
Definition at line <a class="el" href="IsoGaussian_8hpp-source.html#l00007">7</a> of file <a class="el" href="IsoGaussian_8hpp-source.html">IsoGaussian.hpp</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="IsoGaussian::IsoGaussian" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> IsoGaussian::IsoGaussian </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor 
<p>
Definition at line <a class="el" href="IsoGaussian_8cpp-source.html#l00102">102</a> of file <a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a>.
<p>
References <a class="el" href="IsoGaussian_8cpp-source.html#l00067">calculateCodeIndexR()</a>, <a class="el" href="IsoGaussian_8cpp-source.html#l00085">calculateCodeIndexU()</a>, <a class="el" href="ResolutionFunction_8cpp-source.html#l00029">ResolutionFunction::calculateFWHMR()</a>, <a class="el" href="ResolutionFunction_8cpp-source.html#l00099">ResolutionFunction::calculateFWHMU()</a>, <a class="el" href="IsoGaussian_8cpp-source.html#l00004">calculateKernelR()</a>, and <a class="el" href="IsoGaussian_8cpp-source.html#l00035">calculateKernelU()</a>.
<p>
<div class="fragment"><pre>00103 {
00104   resFunR = resFunU =0;
00105   <span class="comment">//calculate resolution function on transaxial direction</span>
00106   <a class="code" href="classResolutionFunction.html#a0">calculateFWHMR</a>(params,scanner);
00107   <a class="code" href="classIsoGaussian.html#b0">calculateCodeIndexR</a>(params,scanner);
00108   <a class="code" href="classIsoGaussian.html#b1">calculateKernelR</a>(params); 
00109   <span class="comment">//calculate resolution function on axial direction</span>
00110   <a class="code" href="classResolutionFunction.html#a1">calculateFWHMU</a>(params,scanner);
00111   <a class="code" href="classIsoGaussian.html#b2">calculateCodeIndexU</a>(params, scanner);
00112   <a class="code" href="classIsoGaussian.html#b3">calculateKernelU</a>(params); 
00113 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="IsoGaussian::~IsoGaussian" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> IsoGaussian::~<a class="el" href="classIsoGaussian.html">IsoGaussian</a> </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor 
<p>
Definition at line <a class="el" href="IsoGaussian_8hpp-source.html#l00024">24</a> of file <a class="el" href="IsoGaussian_8hpp-source.html">IsoGaussian.hpp</a>.
<p>
<div class="fragment"><pre>00024 {};
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b0" doxytag="IsoGaussian::calculateCodeIndexR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void IsoGaussian::calculateCodeIndexR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculate code index on transaxial direction 
<p>
Implements <a class="el" href="classResolutionFunction.html#a2">ResolutionFunction</a>.
<p>
Definition at line <a class="el" href="IsoGaussian_8cpp-source.html#l00067">67</a> of file <a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a>.
<p>
References <a class="el" href="HRRTScannerParams_8hpp-source.html#l00069">HRRTScannerParams::coincidence</a>, <a class="el" href="Array3D_8hpp-source.html#l00296">Array3D&lt; float &gt;::max()</a>, <a class="el" href="Array3D_8hpp-source.html#l00311">Array3D&lt; float &gt;::min()</a>, <a class="el" href="HRRTScannerParams_8hpp-source.html#l00070">HRRTScannerParams::nDtct</a>, and <a class="el" href="HRRTScannerParams_8hpp-source.html#l00062">HRRTScannerParams::nLayer</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00069 {
00070   <span class="comment">//maping LORs to resolution function index</span>
00071   <span class="keywordtype">float</span> efwhmMax = efwhmR.<a class="code" href="classArray3D.html#a15">max</a>();
00072   <span class="keywordtype">float</span> efwhmMin = efwhmR.<a class="code" href="classArray3D.html#a16">min</a>();
00073 
00074   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>); i++)
00075     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o10">coincidence</a>; k++)
00076       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>; j++)
00077         {
00078           codeIndexR(i,j,k) = floor((efwhmR(i,j,k)-efwhmMin)
00079                                     /Constant::RES_FUN_SAMPLING);
00080           codeIndexR(i,j+scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>,k) = codeIndexR(i,j,k);
00081         }
00082 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="IsoGaussian::calculateCodeIndexU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void IsoGaussian::calculateCodeIndexU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculate code index on axial direction 
<p>
Implements <a class="el" href="classResolutionFunction.html#a3">ResolutionFunction</a>.
<p>
Definition at line <a class="el" href="IsoGaussian_8cpp-source.html#l00085">85</a> of file <a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a>.
<p>
References <a class="el" href="HRRTScannerParams_8hpp-source.html#l00062">HRRTScannerParams::nLayer</a>, and <a class="el" href="HRRTScannerParams_8hpp-source.html#l00071">HRRTScannerParams::nRing</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00087 {
00088   <span class="keywordtype">float</span> efwhmMax = efwhmU.max();
00089   <span class="keywordtype">float</span> efwhmMin = efwhmU.min();
00090 
00091   <span class="comment">//maping LORs to resFunU index</span>
00092   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>); i++)<span class="comment">//layer</span>
00093     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>; j++)<span class="comment">//ring</span>
00094       {
00095         codeIndexU(i,j) = 
00096           floor((efwhmU(i,j)-efwhmMin)/Constant::RES_FUN_SAMPLING);
00097         codeIndexU(i,j+scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>) = codeIndexU(i,j);
00098       }
00099 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="IsoGaussian::calculateKernelR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void IsoGaussian::calculateKernelR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>params</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculation kernel on transaxial direction 
<p>
Implements <a class="el" href="classResolutionFunction.html#a4">ResolutionFunction</a>.
<p>
Definition at line <a class="el" href="IsoGaussian_8cpp-source.html#l00004">4</a> of file <a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a>.
<p>
References <a class="el" href="ResolutionTable_8hpp-source.html#l00018">ResolutionTable::downSpread</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00012">ResolutionTable::kCentralIndex</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00034">ResolutionTable::kernel</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00031">ResolutionTable::magnification</a>, and <a class="el" href="ResolutionTable_8hpp-source.html#l00024">ResolutionTable::upSpread</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00005 {
00006   <span class="keywordtype">float</span> hmax = 1; <span class="comment">//maxum value of kernel</span>
00007   <span class="keywordtype">float</span> hp1 = params.resolutionModel.percentCutoff*hmax; 
00008     <span class="comment">//value at percent cutoff</span>
00009   <span class="keywordtype">float</span> x[Constant::LENGTH_RESFUN]; 
00010     <span class="comment">//coordinate in resolution function space</span>
00011   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iKernel=0; iKernel&lt;   Constant::LENGTH_RESFUN; iKernel++)
00012     x[iKernel] = iKernel- Constant::LENGTH_RESFUN/2.0;
00013   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iResTableR = 0; iResTableR&lt; numResTableR; iResTableR ++){
00014     
00015     <span class="keywordtype">float</span> rp1 = sqrt(log(hp1)/(-2.772))*fwhmR(iResTableR);
00016                <span class="comment">//percent cutoff coordinates</span>
00017     resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o2">upSpread</a> = resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o1">downSpread</a> = rp1;
00018     resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o3">magnification</a> = 
00019       Constant::RESFUNCUTOFF*Constant::LENGTH_RESFUN/(2*rp1);
00020               <span class="comment">//magnification</span>
00021     resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o0">kCentralIndex</a> = Constant::LENGTH_RESFUN/2;
00022     <span class="keywordtype">float</span> dx = params.geometry.dX/resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o3">magnification</a>;
00023          <span class="comment">//sampling distance</span>
00024     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iKernel=0; iKernel&lt; Constant::LENGTH_RESFUN; iKernel++){
00025       <span class="comment">//calculate kernel</span>
00026         
00027       resFunR[iResTableR].<a class="code" href="structResolutionTable.html#o4">kernel</a>[iKernel] = 
00028         exp(-2.772*POW2((x[iKernel]*dx/fwhmR(iResTableR))));
00029     }
00030   }
00031 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="IsoGaussian::calculateKernelU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void IsoGaussian::calculateKernelU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>params</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculation kernel on axial direction 
<p>
Implements <a class="el" href="classResolutionFunction.html#a5">ResolutionFunction</a>.
<p>
Definition at line <a class="el" href="IsoGaussian_8cpp-source.html#l00035">35</a> of file <a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a>.
<p>
References <a class="el" href="ResolutionTable_8hpp-source.html#l00018">ResolutionTable::downSpread</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00012">ResolutionTable::kCentralIndex</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00034">ResolutionTable::kernel</a>, <a class="el" href="ResolutionTable_8hpp-source.html#l00031">ResolutionTable::magnification</a>, and <a class="el" href="ResolutionTable_8hpp-source.html#l00024">ResolutionTable::upSpread</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00036 {
00037   <span class="keywordtype">float</span> hmax = 1; <span class="comment">//maxum value of kernel</span>
00038   <span class="keywordtype">float</span> hp1 = params.resolutionModel.percentCutoff*hmax; 
00039    <span class="comment">//value at percent cutoff</span>
00040   <span class="keywordtype">float</span> x[Constant::LENGTH_RESFUN]; 
00041      <span class="comment">//coordinate in resolution function space</span>
00042   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iKernel=0; iKernel&lt;   Constant::LENGTH_RESFUN; iKernel++)
00043     x[iKernel] = iKernel- Constant::LENGTH_RESFUN/2.0;
00044   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iResTableU = 0; iResTableU&lt; numResTableU; iResTableU ++)
00045     {
00046       <span class="keywordtype">float</span> rp1 = sqrt(log(hp1)/(-2.772))*fwhmU(iResTableU);
00047                <span class="comment">//percent cutoff coordinates</span>
00048       resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o2">upSpread</a> = 
00049         resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o1">downSpread</a> = rp1;
00050       resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o3">magnification</a> = 
00051         Constant::RESFUNCUTOFF*Constant::LENGTH_RESFUN/(2*rp1);
00052                   <span class="comment">//magnification</span>
00053       resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o0">kCentralIndex</a> = Constant::LENGTH_RESFUN/2; 
00054                 <span class="comment">//central index in the middle</span>
00055       <span class="keywordtype">float</span> dx = params.geometry.dX/resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o3">magnification</a>;
00056                     <span class="comment">//sampling distance</span>
00057       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iKernel=0; iKernel&lt; Constant::LENGTH_RESFUN; iKernel++) 
00058                         <span class="comment">//calculate kernel</span>
00059         {
00060           resFunU[iResTableU].<a class="code" href="structResolutionTable.html#o4">kernel</a>[iKernel] = 
00061             exp(-2.772*POW2((x[iKernel]*dx/fwhmU(iResTableU))));
00062         }
00063     }
00064 }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="IsoGaussian_8hpp-source.html">IsoGaussian.hpp</a><li><a class="el" href="IsoGaussian_8cpp-source.html">IsoGaussian.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:49 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
