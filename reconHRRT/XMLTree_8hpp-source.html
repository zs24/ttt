<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: XMLTree.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>XMLTree.hpp</h1><div class="fragment"><pre>00001 
00014 <span class="preprocessor">#ifndef XMLTREE_HPP</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define XMLTREE_HPP</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include &lt;xercesc/dom/DOMBuilder.hpp&gt;</span>
00018 <span class="preprocessor">#include &lt;xercesc/dom/DOMDocument.hpp&gt;</span>
00019 <span class="preprocessor">#include &lt;xercesc/dom/DOMTreeWalker.hpp&gt;</span>
00020 <span class="preprocessor">#include &lt;xercesc/dom/DOMErrorHandler.hpp&gt;</span>
00021 <span class="preprocessor">#include &lt;xercesc/dom/DOMImplementation.hpp&gt;</span>
00022 <span class="preprocessor">#include &lt;xercesc/dom/DOMImplementationLS.hpp&gt;</span>
00023 <span class="preprocessor">#include &lt;xercesc/util/XMLUniDefs.hpp&gt;</span>
00024 <span class="preprocessor">#include &lt;xercesc/util/XMLString.hpp&gt;</span>
00025 <span class="preprocessor">#include &lt;xercesc/dom/DOMNamedNodeMap.hpp&gt;</span>
00026 
00027 <span class="preprocessor">#include &lt;iostream&gt;</span>
00028 <span class="preprocessor">#include &lt;vector&gt;</span>
00029 <span class="preprocessor">#include &lt;map&gt;</span>
00030 
00031 XERCES_CPP_NAMESPACE_USE
00032 
00033 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00034 
00035 <span class="keyword">class </span>XMLTree {
00036 
00037         <span class="keyword">public</span>:
00038 
00047                 XMLTree();
00048 
00057                 XMLTree(string filename); 
00058 
00067                 XMLTree(XMLTree &amp;myTree);
00068 
00076                 ~XMLTree(); 
00077 
00086                 XMLTree &amp; operator = (XMLTree &amp;myTree);
00087 
00104                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, <span class="keywordtype">short</span> &amp;value); <span class="comment">// Used by Params class and House class. Retaining it for now</span>
00105                                                                             <span class="comment">// Will discard later</span>
00106                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, <span class="keywordtype">int</span> &amp;value);
00107                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, <span class="keywordtype">float</span> &amp;value);
00108                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, string &amp;value);
00109 
00122                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, <span class="keywordtype">int</span> value);
00123                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, <span class="keywordtype">float</span> value);
00124                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, string value);
00125 
00140                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, <span class="keywordtype">int</span> &amp;value, string &amp;attributes);
00141                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, <span class="keywordtype">float</span> &amp;value, string &amp;attributes);
00142                 <span class="keywordtype">bool</span> getTagValue(string subtree, string tag, string &amp;value, string &amp;attributes);
00143 
00155                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, <span class="keywordtype">int</span> value, string attributes);
00156                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, <span class="keywordtype">float</span> value, string attributes);
00157                 <span class="keywordtype">bool</span> putTagValue(string subtree, string tag, string value, string attributes);
00158 
00170                 <span class="keywordtype">bool</span> insertTag(string subtree, string tag);
00171 
00181                 <span class="keywordtype">bool</span> replaceTag(string subtree, string tag);
00182 
00192                 <span class="keywordtype">bool</span> removeTag(string subtree, string tag);
00193 
00205                 <span class="keywordtype">bool</span> toString(string &amp;tree);
00206 
00216                 <span class="keywordtype">bool</span> insertComment(string subtree, string comment);
00217 
00226                 <span class="keywordtype">bool</span> parseFile(string filename);
00227 
00236                 <span class="keywordtype">bool</span> writeTreeToFile(string xmlFileName);
00237 
00253                 <span class="keywordtype">bool</span> insertTree(string subtree, XMLTree &amp;newTree, string tag, string value, string attribute);
00254                 <span class="keywordtype">bool</span> insertTree(string subtree, XMLTree &amp;newTree, string tag, <span class="keywordtype">int</span> value, string attribute);
00255                 <span class="keywordtype">bool</span> insertTree(string subtree, XMLTree &amp;newTree, string tag, <span class="keywordtype">float</span> value, string attribute);
00256  
00257 
00261                 DOMDocument *domDoc;
00262 
00266                 <span class="keywordtype">bool</span> empty;
00267 
00271                 <span class="keywordtype">bool</span> multipleTags;
00272 
00276                 <span class="keywordtype">int</span> tagCount;
00277 
00278         <span class="keyword">private</span>:
00279                 string xmlFile;
00280                 DOMTreeWalker *curSubTree;
00281                 DOMTreeWalker *docTree;
00282                 DOMBuilder *parser;
00283                 <span class="comment">//string prevSubTree;</span>
00284                 <span class="comment">//bool prevGetTag;</span>
00285                 <span class="comment">//bool prevPutTag;</span>
00286                 <span class="keywordtype">int</span> curIndex;
00287 
00296                 <span class="keywordtype">void</span> initTree();
00305                 <span class="keywordtype">void</span> buildDomTree();
00314                 <span class="keywordtype">bool</span> copyTree(XMLTree &amp;myTree);
00323                 vector&lt;string&gt; parseSubTree(string subtree);
00334                 <span class="keywordtype">bool</span> getTagValueStr(string subtree, string tag, string &amp;value);
00345                 <span class="keywordtype">bool</span> putTagValueStr(string subtree, string tag, string value);
00356                 <span class="keywordtype">bool</span> setSubTree(string subtree, string tag, <span class="keywordtype">bool</span> flag); <span class="comment">// </span>
00365 <span class="comment"></span>                <span class="keywordtype">bool</span> setSubTreeByTreeParse(string subtree); 
00374                 <span class="keywordtype">bool</span> setSubTreeByGetEle(string subtree); 
00383                 <span class="keywordtype">bool</span> setSubTreeByAttr(string subtree); 
00392                 <span class="keywordtype">void</span> splitAttributes(string attributes, map&lt;string,string&gt; &amp;attr );
00403                 <span class="keywordtype">bool</span> getTagAttributes(string subtree, string tag, string &amp;attributes);
00413                 <span class="keywordtype">bool</span> setTagAttributes(string subtree, string tag, string attributes);
00421                 <span class="keywordtype">bool</span> insertSubTree(string subtree, XMLTree &amp;newTree);
00428                 <span class="keywordtype">bool</span> isSign(<span class="keywordtype">char</span> aChar);
00435                 <span class="keywordtype">void</span> getRidOfTrailingBlanks(string&amp; aString);
00442                 <span class="keywordtype">bool</span> isGoodInt(<span class="keyword">const</span> string&amp; aString);
00450                 <span class="keywordtype">bool</span> isGoodDouble(<span class="keyword">const</span> string&amp; aString);       
00458                 <span class="keywordtype">double</span> stringToDouble(<span class="keyword">const</span> string&amp; aString);
00467                 <span class="keywordtype">float</span> stringToFloat(<span class="keyword">const</span> string&amp; aString);
00468 <span class="preprocessor">        #define DEBUGL 5</span>
00469 <span class="preprocessor"></span><span class="preprocessor">        #define SEVERE 0</span>
00470 <span class="preprocessor"></span><span class="preprocessor">        #define HIGH 1</span>
00471 <span class="preprocessor"></span><span class="preprocessor">        #define MEDIUM 2</span>
00472 <span class="preprocessor"></span><span class="preprocessor">        #define LOW 3</span>
00473 <span class="preprocessor"></span><span class="preprocessor">        #define INFO 0</span>
00474 <span class="preprocessor"></span>
00475         };
00476 
00485 <span class="comment">// ---------------------------------------------------------------------------</span>
00486 <span class="comment">//  Simple error handler deriviative to install on parser</span>
00487 <span class="comment">// ---------------------------------------------------------------------------</span>
<a name="l00488"></a><a class="code" href="classXMLTreeErrorHandler.html">00488</a> <span class="keyword">class  </span><a class="code" href="classXMLTreeErrorHandler.html">XMLTreeErrorHandler</a> : <span class="keyword">public</span> DOMErrorHandler
00489 {
00490 <span class="keyword">public</span>:
00499     <span class="comment">// -----------------------------------------------------------------------</span>
00500     <span class="comment">//  Constructors and Destructor</span>
00501     <span class="comment">// -----------------------------------------------------------------------</span>
00502     <a class="code" href="classXMLTreeErrorHandler.html#a0">XMLTreeErrorHandler</a>();
00503     ~<a class="code" href="classXMLTreeErrorHandler.html">XMLTreeErrorHandler</a>();
00504 
00505 
00514     <span class="comment">// -----------------------------------------------------------------------</span>
00515     <span class="comment">//  Getter methods</span>
00516     <span class="comment">// -----------------------------------------------------------------------</span>
00517     <span class="keywordtype">bool</span> <a class="code" href="classXMLTreeErrorHandler.html#a2">getSawErrors</a>() <span class="keyword">const</span>;
00518 
00519 
00528     <span class="comment">// -----------------------------------------------------------------------</span>
00529     <span class="comment">//  Implementation of the DOM ErrorHandler interface</span>
00530     <span class="comment">// -----------------------------------------------------------------------</span>
00531     <span class="keywordtype">bool</span> <a class="code" href="classXMLTreeErrorHandler.html#a3">handleError</a>(<span class="keyword">const</span> DOMError&amp; domError);
00532     <span class="keywordtype">void</span> resetErrors();
00533 
00534 
00535 <span class="keyword">private</span> :
00544     <span class="comment">// -----------------------------------------------------------------------</span>
00545     <span class="comment">//  Unimplemented constructors and operators</span>
00546     <span class="comment">// -----------------------------------------------------------------------</span>
00547     <a class="code" href="classXMLTreeErrorHandler.html#a0">XMLTreeErrorHandler</a>(<span class="keyword">const</span> <a class="code" href="classXMLTreeErrorHandler.html">XMLTreeErrorHandler</a>&amp;);
00548     <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> <a class="code" href="classXMLTreeErrorHandler.html">XMLTreeErrorHandler</a>&amp;);
00549 
00550     <span class="comment">// -----------------------------------------------------------------------</span>
00551     <span class="comment">//  Private data members</span>
00552     <span class="comment">//</span>
00553     <span class="comment">//  fSawErrors</span>
00554     <span class="comment">//      This is set if we get any errors, and is queryable via a getter</span>
00555     <span class="comment">//      method. Its used by the main code to suppress output if there are</span>
00556     <span class="comment">//      errors.</span>
00557     <span class="comment">// -----------------------------------------------------------------------</span>
00558     <span class="keywordtype">bool</span>    fSawErrors;
00559 };
00560 
00561 
<a name="l00562"></a><a class="code" href="classXMLTreeErrorHandler.html#a2">00562</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classXMLTreeErrorHandler.html#a2">XMLTreeErrorHandler::getSawErrors</a>()<span class="keyword"> const</span>
00563 <span class="keyword"></span>{
00564     <span class="keywordflow">return</span> fSawErrors;
00565 }
00566 
00575 <span class="comment">// ---------------------------------------------------------------------------</span>
00576 <span class="comment">//  This is a simple class that lets us do easy (though not terribly efficient)</span>
00577 <span class="comment">//  trancoding of XMLCh data to local code page for display.</span>
00578 <span class="comment">// ---------------------------------------------------------------------------</span>
<a name="l00579"></a><a class="code" href="classStrX.html">00579</a> <span class="keyword">class </span><a class="code" href="classStrX.html">StrX</a>
00580 {
00581 <span class="keyword">public</span> :
00590     <span class="comment">// -----------------------------------------------------------------------</span>
00591     <span class="comment">//  Constructors and Destructor</span>
00592     <span class="comment">// -----------------------------------------------------------------------</span>
<a name="l00593"></a><a class="code" href="classStrX.html#a0">00593</a>     <a class="code" href="classStrX.html#a0">StrX</a>(<span class="keyword">const</span> XMLCh* <span class="keyword">const</span> toTranscode)
00594     {
00595         <span class="comment">// Call the private transcoding method</span>
00596         fLocalForm = XMLString::transcode(toTranscode);
00597     }
00598 
00599     ~<a class="code" href="classStrX.html">StrX</a>()
00600     {
00601         XMLString::release(&amp;fLocalForm);
00602     }
00603 
00604 
00613     <span class="comment">// -----------------------------------------------------------------------</span>
00614     <span class="comment">//  Getter methods</span>
00615     <span class="comment">// -----------------------------------------------------------------------</span>
<a name="l00616"></a><a class="code" href="classStrX.html#a2">00616</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classStrX.html#a2">localForm</a>()<span class="keyword"> const</span>
00617 <span class="keyword">    </span>{
00618         <span class="keywordflow">return</span> fLocalForm;
00619     }
00620 
00621 <span class="keyword">private</span> :
00622     <span class="comment">// -----------------------------------------------------------------------</span>
00623     <span class="comment">//  Private data members</span>
00624     <span class="comment">//</span>
00625     <span class="comment">//  fLocalForm</span>
00626     <span class="comment">//      This is the local code page form of the string.</span>
00627     <span class="comment">// -----------------------------------------------------------------------</span>
00628     <span class="keywordtype">char</span>*   fLocalForm;
00629 };
00630 
00631 
00632 <span class="preprocessor">#endif //XMLTREE.HPP</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:48 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
