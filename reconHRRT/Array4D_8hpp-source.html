<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: Array4D.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>Array4D.hpp</h1><div class="fragment"><pre>00001 
<a name="l00005"></a><a class="code" href="classArray4D.html">00005</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classArray4D.html">Array4D</a> 
00006 {
00007 <span class="keyword">public</span>:
00008   <span class="comment">/* constructor</span>
00009 <span class="comment">   *@param N1 first dimension</span>
00010 <span class="comment">   *@param N2 second dimension</span>
00011 <span class="comment">   *@param N3 third dimension</span>
00012 <span class="comment">   *@param N4 fourth dimesion</span>
00013 <span class="comment">   */</span>
00014   <a class="code" href="classArray4D.html#a3">Array4D</a>(<span class="keywordtype">int</span> N1,<span class="keywordtype">int</span> N2,<span class="keywordtype">int</span> N3, <span class="keywordtype">int</span> N4) 
00015   {
00016     x=NULL;y=NULL;z=NULL;w=NULL;isnew =1;
00017     <a class="code" href="classArray4D.html#a9">init</a>(N1,N2,N3,N4);
00018   }
<a name="l00022"></a><a class="code" href="classArray4D.html#a1">00022</a>   <a class="code" href="classArray4D.html#a3">Array4D</a>(<a class="code" href="classArray4D.html">Array4D</a>&amp; obj) {isnew = 1;copy(obj);}
<a name="l00030"></a><a class="code" href="classArray4D.html#a2">00030</a>   <a class="code" href="classArray4D.html#a3">Array4D</a>(T**** pin,<span class="keywordtype">int</span> N1, <span class="keywordtype">int</span> N2,<span class="keywordtype">int</span> N3, <span class="keywordtype">int</span> N4) 
00031   {
00032     dim1=N1; dim2=N2; dim3=N3, dim4=N4;
00033     isnew = 0;
00034     w = pin;
00035     z = pin[0];
00036     y = pin[0][0];
00037     x = pin[0][0][0];
00038   }
<a name="l00041"></a><a class="code" href="classArray4D.html#a3">00041</a>   <a class="code" href="classArray4D.html#a3">Array4D</a>() {x=NULL;y=NULL;z=NULL;w=NULL;isnew =1;}
00042 
00043 
<a name="l00046"></a><a class="code" href="classArray4D.html#a4">00046</a>   <a class="code" href="classArray4D.html#a4">~Array4D</a>() {
00047     <span class="keywordflow">if</span>(isnew &amp;&amp; x &amp;&amp; y &amp;&amp; z &amp;&amp; w){
00048       <span class="keyword">delete</span>[] x;
00049       <span class="keyword">delete</span>[] y;
00050       <span class="keyword">delete</span>[] z;
00051       <span class="keyword">delete</span>[] w;
00052     }
00053   }     
00054 
<a name="l00059"></a><a class="code" href="classArray4D.html#a5">00059</a>   <a class="code" href="classArray4D.html">Array4D</a>&amp; <a class="code" href="classArray4D.html#a5">operator=</a>(<a class="code" href="classArray4D.html">Array4D</a>&amp; obj)
00060   {
00061     <span class="keywordflow">if</span>(w==obj.<a class="code" href="classArray4D.html#r3">w</a>) <span class="keywordflow">return</span>(*this);
00062     <span class="keywordflow">if</span>(isnew)  {
00063         <span class="keywordflow">if</span>(w) <span class="keyword">delete</span>[] w;
00064         <span class="keywordflow">if</span>(z) <span class="keyword">delete</span>[] z;
00065         <span class="keywordflow">if</span>(y) <span class="keyword">delete</span>[] y;
00066         <span class="keywordflow">if</span>(x) <span class="keyword">delete</span>[] x;
00067       }
00068     isnew = 1;
00069     copy(obj);
00070     <span class="keywordflow">return</span>(*this);
00071   }
<a name="l00077"></a><a class="code" href="classArray4D.html#a6">00077</a>   <a class="code" href="classArray4D.html">Array4D</a> &amp; <a class="code" href="classArray4D.html#a5">operator = </a>(T * pin) 
00078   {
00079     memcpy(x,pin,<span class="keyword">sizeof</span>(T)*dim1*dim2*dim3*dim4);
00080     <span class="keywordflow">return</span> (*this);
00081   }
00082 
<a name="l00087"></a><a class="code" href="classArray4D.html#a7">00087</a>   <span class="keywordtype">void</span> <a class="code" href="classArray4D.html#a5">operator=</a>(<span class="keyword">const</span> T &amp; value)
00088   {
00089     <span class="keywordflow">if</span>(!x &amp;&amp; !y &amp;&amp; !z &amp;&amp; !w)
00090       {
00091         cout&lt;&lt;<span class="stringliteral">"Error in Array4D : Array not initialized... "</span>&lt;&lt;endl;
00092         exit(-1);
00093       }
00094     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;dim1*dim2*dim3*dim4; i++)
00095       x[i] = value;
00096   }
00097 
<a name="l00103"></a><a class="code" href="classArray4D.html#a8">00103</a>   T&amp; <a class="code" href="classArray4D.html#a8">operator()</a>(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j,<span class="keywordtype">int</span> k, <span class="keywordtype">int</span> l) 
00104   {
00105                 
00106     <span class="keywordflow">if</span>(i&lt;0||dim1&lt;=i||j&lt;0||dim2&lt;=j||k&lt;0||dim3&lt;=k||l&lt;0||dim4&lt;=l){
00107       cout &lt;&lt; <span class="stringliteral">"Bad index ("</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;j&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;k&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;l&lt;&lt;<span class="stringliteral">") &gt; ("</span>;
00108       cout &lt;&lt;dim1&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;dim2&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;dim3&lt;&lt;<span class="stringliteral">","</span>&lt;&lt;dim4&lt;&lt;<span class="stringliteral">")"</span>&lt;&lt; endl;
00109       <span class="keywordflow">return</span>(*x);
00110     }
00111                 
00112     <span class="keywordflow">return</span>( w[l][k][j][i] );
00113   }
00114         
00115         
<a name="l00122"></a><a class="code" href="classArray4D.html#a9">00122</a>   <span class="keywordtype">void</span> <a class="code" href="classArray4D.html#a9">init</a>(<span class="keywordtype">int</span> N1, <span class="keywordtype">int</span> N2, <span class="keywordtype">int</span> N3, <span class="keywordtype">int</span> N4)
00123   {
00124     dim1 =N1; dim2 = N2; dim3 = N3; dim4 = N4;
00125     <span class="keywordflow">if</span>(isnew) {
00126       <span class="keywordflow">if</span>(w) <span class="keyword">delete</span>[] w;
00127       <span class="keywordflow">if</span>(z) <span class="keyword">delete</span>[] z;
00128       <span class="keywordflow">if</span>(y) <span class="keyword">delete</span>[] y;
00129       <span class="keywordflow">if</span>(x) <span class="keyword">delete</span>[] x;
00130     }
00131     isnew = 1;
00132     x = <span class="keyword">new</span> T[dim1*dim2*dim3*dim4];
00133     y = <span class="keyword">new</span> T*[dim2*dim3*dim4];
00134     z = <span class="keyword">new</span> T**[dim3*dim4];
00135     w = <span class="keyword">new</span> T***[dim4];
00136     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n =0; n&lt;dim2*dim3*dim4; n++)
00137       y[n] = &amp;x[dim1*n];
00138     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n= 0; n&lt;dim3*dim4; n++)
00139       z[n] = &amp;y[dim2*n];
00140     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n= 0; n&lt;dim4; n++)
00141       w[n] = &amp;z[dim3*n];
00142   }
00143         
<a name="l00147"></a><a class="code" href="classArray4D.html#a10">00147</a>   T <a class="code" href="classArray4D.html#a10">max</a>()
00148   {
00149     T maxVal = x[0]; 
00150     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;dim1*dim2*dim3*dim4; i++)  {
00151       <span class="keywordflow">if</span> (x[i] &gt; maxVal) 
00152         maxVal = x[i];
00153     }
00154     <span class="keywordflow">return</span> maxVal;
00155   }
00156    
<a name="l00160"></a><a class="code" href="classArray4D.html#a11">00160</a>   T <a class="code" href="classArray4D.html#a11">min</a>()
00161   {
00162     T minVal = x[0]; 
00163     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;dim1*dim2*dim3*dim4; i++){
00164       <span class="keywordflow">if</span> (x[i] &lt; minVal) 
00165         minVal = x[i];
00166     }
00167     <span class="keywordflow">return</span> minVal;
00168   }
00169 
00170   T *getSpecialBlock(<span class="keywordtype">int</span> ix, <span class="keywordtype">int</span> iy) {
00171         <span class="keywordflow">if</span>(iy &lt; 0 || iy &gt; dim2 || ix &lt; 0 || ix &gt; dim1) {
00172            cout&lt;&lt;<span class="stringliteral">" Bad Index :"</span>&lt;&lt;iy&lt;&lt;<span class="stringliteral">" , "</span>&lt;&lt;ix&lt;&lt;endl;
00173            <span class="keywordflow">return</span> (x);
00174         }
00175         T *block = <span class="keyword">new</span> T[dim3*dim4];
00176         <span class="keywordtype">int</span> offset = (ix*dim2 + iy)*dim3*dim4;
00177         memcpy(block,&amp;x[offset],<span class="keyword">sizeof</span>(T)*dim3*dim4);
00178         <span class="keywordflow">return</span> (block);
00179   }
00180 
00181   <span class="keywordtype">void</span> putSpecialBlock(<span class="keywordtype">int</span> ix, <span class="keywordtype">int</span> iy, T *block) {
00182         <span class="keywordflow">if</span>(ix*dim1+iy*dim2+dim3*dim4 &gt; dim1*dim2*dim3*dim4) {
00183            cout&lt;&lt;<span class="stringliteral">" Size too large: "</span>&lt;&lt;endl;
00184         }       
00185         <span class="keywordtype">int</span> offset = (ix*dim2 + iy)*dim3*dim4;
00186         memcpy(&amp;x[offset], block, <span class="keyword">sizeof</span>(T)*dim3*dim4);
00187   }
00188   
00189 <span class="keyword">private</span>:
00190   T* x;
00191   T **y;
00192   T*** z;
00193   T**** w;
00194   <span class="keywordtype">int</span> dim1,dim2,dim3,dim4;
00195   <span class="keywordtype">int</span> isnew;
00196   <span class="comment">// utility function</span>
00197   <span class="keywordtype">void</span> copy(<a class="code" href="classArray4D.html">Array4D</a>&amp; obj) 
00198   {
00199     dim1=obj.<a class="code" href="classArray4D.html#r4">dim1</a>; dim2=obj.<a class="code" href="classArray4D.html#r5">dim2</a>; dim3=obj.<a class="code" href="classArray4D.html#r6">dim3</a>; dim4=obj.<a class="code" href="classArray4D.html#r7">dim4</a>;
00200     x = <span class="keyword">new</span> T[dim1*dim2*dim3*dim4];
00201     memcpy(x,obj.<a class="code" href="classArray4D.html#r0">x</a>,<span class="keyword">sizeof</span>(T)*dim1*dim2*dim3*dim4);
00202     y = <span class="keyword">new</span> T*[dim2*dim3*dim4];
00203     z = <span class="keyword">new</span> T**[dim3*dim4];
00204     w = <span class="keyword">new</span> T***[dim4];
00205     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n =0; n&lt;dim2*dim3*dim4; n++)
00206       y[n] = &amp;x[dim1*n];
00207     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n= 0; n&lt;dim3*dim4; n++)
00208       z[n] = &amp;y[dim2*n];
00209     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n= 0; n&lt;dim4; n++)
00210       w[n] = &amp;z[dim3*n];
00211   }
00212 };
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:46 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
