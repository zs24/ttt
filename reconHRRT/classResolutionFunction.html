<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: ResolutionFunction class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ResolutionFunction Class Reference</h1><code>#include &lt;<a class="el" href="ResolutionFunction_8hpp-source.html">ResolutionFunction.hpp</a>&gt;</code>
<p>
<p>Inheritance diagram for ResolutionFunction:
<p><center><img src="classResolutionFunction.png" usemap="#ResolutionFunction_map" border="0" alt=""></center>
<map name="ResolutionFunction_map">
<area href="classIsoGaussian.html" alt="IsoGaussian" shape="rect" coords="0,56,119,80">
</map>
<a href="classResolutionFunction-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a0">calculateFWHMR</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a1">calculateFWHMU</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a2">calculateCodeIndexR</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)=0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a3">calculateCodeIndexU</a> (Params &amp;params, <a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *scanner)=0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a4">calculateKernelR</a> (Params &amp;params)=0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a5">calculateKernelU</a> (Params &amp;params)=0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structResolutionTable.html">ResolutionTable</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a6">getResFunR</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structResolutionTable.html">ResolutionTable</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a7">getResFunU</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classArray3D.html">Array3D</a>&lt; short &gt; &amp;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a8">getCodeIndexR</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Array2D&lt; short &gt; &amp;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classResolutionFunction.html#a9">getCodeIndexU</a> ()</td></tr>

<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p0" doxytag="ResolutionFunction::efwhmR" ></a>
<a class="el" href="classArray3D.html">Array3D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>efwhmR</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p1" doxytag="ResolutionFunction::efwhmU" ></a>
Array2D&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>efwhmU</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p2" doxytag="ResolutionFunction::fwhmR" ></a>
<a class="el" href="classArray1D.html">Array1D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>fwhmR</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p3" doxytag="ResolutionFunction::fwhmU" ></a>
<a class="el" href="classArray1D.html">Array1D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>fwhmU</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p4" doxytag="ResolutionFunction::codeIndexR" ></a>
<a class="el" href="classArray3D.html">Array3D</a>&lt; short &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>codeIndexR</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p5" doxytag="ResolutionFunction::codeIndexU" ></a>
Array2D&lt; short &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>codeIndexU</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p6" doxytag="ResolutionFunction::numResTableR" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>numResTableR</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p7" doxytag="ResolutionFunction::numResTableU" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>numResTableU</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p8" doxytag="ResolutionFunction::resFunR" ></a>
<a class="el" href="structResolutionTable.html">ResolutionTable</a> *&nbsp;</td><td class="memItemRight" valign=bottom><b>resFunR</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p9" doxytag="ResolutionFunction::resFunU" ></a>
<a class="el" href="structResolutionTable.html">ResolutionTable</a> *&nbsp;</td><td class="memItemRight" valign=bottom><b>resFunU</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class describes base of the resolution functions 
<p>

<p>
Definition at line <a class="el" href="ResolutionFunction_8hpp-source.html#l00014">14</a> of file <a class="el" href="ResolutionFunction_8hpp-source.html">ResolutionFunction.hpp</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2" doxytag="ResolutionFunction::calculateCodeIndexR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void ResolutionFunction::calculateCodeIndexR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculate code index on transaxial direction 
<p>
Implemented in <a class="el" href="classIsoGaussian.html#b0">IsoGaussian</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ResolutionFunction::calculateCodeIndexU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void ResolutionFunction::calculateCodeIndexU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculate code index on axial direction 
<p>
Implemented in <a class="el" href="classIsoGaussian.html#b2">IsoGaussian</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ResolutionFunction::calculateFWHMR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ResolutionFunction::calculateFWHMR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
calculate the FWHM on transaxial direction @ param params, Params object, to pass the following parameter params.resolutionmodel.fwhm - 2.5 mm (default) params.resolutionmodel.asymmetry - consider asymmetry (default is not) params.resolutionmodel.detectorobliquness - consider detector obliqueness (default is not) params.resolutionmodel.crystalposition - consider crystal position within the block (default is not) params.resolutionmodel.blockposition - condider block position (default is not) params.resolutionmodel.magnification - apply a mag factor (default is 10.0) params.resolutionmodel.precentcutoff - percent of max to cut tails params.resolutionmodel.motioncorrectionuncertainty - consider motion correction uncertainty @ param scanner the structure to pass structure parameters 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00029">29</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
References <a class="el" href="HRRTScannerParams_8hpp-source.html#l00069">HRRTScannerParams::coincidence</a>, <a class="el" href="Array3D_8hpp-source.html#l00132">Array3D&lt; short &gt;::init()</a>, <a class="el" href="Array1D_8hpp-source.html#l00085">Array1D&lt; float &gt;::init()</a>, <a class="el" href="Array3D_8hpp-source.html#l00132">Array3D&lt; float &gt;::init()</a>, <a class="el" href="Array3D_8hpp-source.html#l00296">Array3D&lt; float &gt;::max()</a>, <a class="el" href="Array3D_8hpp-source.html#l00311">Array3D&lt; float &gt;::min()</a>, <a class="el" href="HRRTScannerParams_8hpp-source.html#l00070">HRRTScannerParams::nDtct</a>, and <a class="el" href="HRRTScannerParams_8hpp-source.html#l00062">HRRTScannerParams::nLayer</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian::IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00031 {
00032   <span class="comment">//define scanner related parameters</span>
00033   <span class="keyword">const</span> <span class="keywordtype">int</span> nLayerSquare = POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>);  <span class="comment">//layers</span>
00034   <span class="keyword">const</span> <span class="keywordtype">int</span> nDtctDouble = scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>*2;
00035     <span class="comment">//lors between 2 detector  banks.</span>
00036   <span class="keyword">const</span> <span class="keywordtype">int</span> nCoincidence = scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o10">coincidence</a>; 
00037   <span class="comment">//banks where the 2 detectors in coincidence are located</span>
00038   <span class="keywordtype">float</span> bankEffectEnable[5] = {1.2, 1.1, 1.0, 1.1, 1.2}; 
00039   <span class="comment">//bank effect when params.resolutionmodel.</span>
00040   <span class="comment">//detectorobliquness is set</span>
00041   <span class="keywordtype">float</span> bankEffectDisable[5] = {1.0, 1.0, 1.0, 1.0, 1.0};
00042   <span class="keywordtype">float</span> *bankEffect;
00043   <span class="keywordtype">float</span> layerEffectEnable[] = {1.0, 1.1, 1.1, 1.21}; 
00044   <span class="comment">//layer effect when params.resolutionmodel.layer is set</span>
00045   <span class="keywordtype">float</span> layerEffectDisable[] = {1.0, 1.0, 1.0, 1.0}; <span class="comment">//</span>
00046   <span class="keywordtype">float</span> *layerEffect;
00047   <span class="keywordtype">float</span> *positionEffect = <span class="keyword">new</span> <span class="keywordtype">float</span> [scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>]; 
00048   <span class="comment">//position effect</span>
00049 
00050   <span class="comment">//determine the scanner related parameters according to </span>
00051   <span class="comment">//the usr's setting</span>
00052   <span class="keywordflow">if</span> (params.resolutionModel.detectorObliqueness)  
00053     <span class="comment">//if detectorObliqueness is set</span>
00054     bankEffect = bankEffectEnable;
00055   <span class="keywordflow">else</span>                                                                          <span class="comment">//otherwise</span>
00056     bankEffect = bankEffectDisable;
00057   <span class="keywordflow">if</span> (params.resolutionModel.crystalPosition)  
00058     <span class="comment">//if crystalPosition set</span>
00059     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i= 0; i&lt; scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>; i++)
00060       positionEffect[i] = 1.0 + 0.005*(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>/2.0-
00061                                        fabs(i-scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>/2.0));
00062   <span class="keywordflow">else</span>                                                                          <span class="comment">//otherwise</span>
00063     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>; i++)
00064       positionEffect[i]= 1.0;
00065   <span class="keywordflow">if</span> (params.resolutionModel.layer)  <span class="comment">//if layer effect is set</span>
00066     layerEffect = layerEffectEnable;
00067   <span class="keywordflow">else</span>                                                          <span class="comment">//otherwise</span>
00068     layerEffect = layerEffectDisable;
00069                 
00070   efwhmR.<a class="code" href="classArray3D.html#a8">init</a>(nLayerSquare, nDtctDouble/2, nCoincidence); 
00071     <span class="comment">//full width with half maximum for resFunR</span>
00072   <span class="comment">//calculate FWHM for all indices</span>
00073   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; nLayerSquare; i++) <span class="comment">//first loop, 0 to layers</span>
00074     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o10">coincidence</a>; k++) 
00075         <span class="comment">//second loop, 0 to bank coincidence,</span>
00076       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>; j++) 
00077          <span class="comment">//third loop, 0 to number detectors in tranxial direction</span>
00078         efwhmR(i,j,k) = params.resolutionModel.FWHM*
00079           bankEffect[k]*positionEffect[j]*layerEffect[i];
00080   <span class="comment">//get max and min of FWHM</span>
00081   <span class="keywordtype">float</span> efwhmMax = efwhmR.<a class="code" href="classArray3D.html#a15">max</a>();
00082   <span class="keywordtype">float</span> efwhmMin = efwhmR.<a class="code" href="classArray3D.html#a16">min</a>();
00083   <span class="comment">//get number of index between min and max with sampling </span>
00084   <span class="comment">//distance RES_FUN_SAMPLING</span>
00085   numResTableR = floor((efwhmMax-efwhmMin)/
00086                        Constant::RES_FUN_SAMPLING)+1;
00087   resFunR = <span class="keyword">new</span> <a class="code" href="structResolutionTable.html">ResolutionTable</a>[numResTableR];
00088   <span class="comment">//calculate fwhmR after resampling</span>
00089   fwhmR.<a class="code" href="classArray1D.html#a8">init</a>(numResTableR);
00090   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iFWHM = 0; iFWHM&lt; numResTableR; iFWHM ++)
00091     fwhmR(iFWHM) = efwhmMin+ iFWHM*Constant::RES_FUN_SAMPLING;
00092   codeIndexR.<a class="code" href="classArray3D.html#a8">init</a>(POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>),scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o11">nDtct</a>*2,
00093                   scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o10">coincidence</a>); <span class="comment">//index of resFunR</span>
00094 
00095   <span class="keyword">delete</span> positionEffect;
00096 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ResolutionFunction::calculateFWHMU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ResolutionFunction::calculateFWHMU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classHRRTScannerParams.html">HRRTScannerParams</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>scanner</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
calculate the FWHM on axial direction @ param params, Params object, to pass the following parameter params.resolutionmodel.fwhm - 2.5 mm (default) params.resolutionmodel.asymmetry - consider asymmetry (default is not) params.resolutionmodel.detectorobliquness - consider detector obliqueness (default is not) params.resolutionmodel.crystalposition - consider crystal position within the block (default is not) params.resolutionmodel.blockposition - condider block position (default is not) params.resolutionmodel.magnification - apply a mag factor (default is 10.0) params.resolutionmodel.precentcutoff - percent of max to cut tails params.resolutionmodel.motioncorrectionuncertainty - consider motion correction uncertainty @ param scanner the structure to pass structure parameters 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00099">99</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
References <a class="el" href="Array1D_8hpp-source.html#l00085">Array1D&lt; float &gt;::init()</a>, <a class="el" href="HRRTScannerParams_8hpp-source.html#l00062">HRRTScannerParams::nLayer</a>, and <a class="el" href="HRRTScannerParams_8hpp-source.html#l00071">HRRTScannerParams::nRing</a>.
<p>
Referenced by <a class="el" href="IsoGaussian_8cpp-source.html#l00102">IsoGaussian::IsoGaussian()</a>.
<p>
<div class="fragment"><pre>00101 {
00102   <span class="comment">//define scanner related parameters</span>
00103   <span class="keyword">const</span> <span class="keywordtype">int</span> nLayerSquare = POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>);  <span class="comment">//layers</span>
00104   <span class="keywordtype">float</span> layerEffectEnable[] = {1.0, 1.1, 1.1, 1.21}; <span class="comment">//layer effect when params.resolutionmodel.layer is set</span>
00105   <span class="keywordtype">float</span> layerEffectDisable[] = {1.0, 1.0, 1.0, 1.0}; <span class="comment">//</span>
00106   <span class="keywordtype">float</span> *layerEffect;
00107   <span class="keywordtype">float</span> *positionEffect = <span class="keyword">new</span> <span class="keywordtype">float</span> [scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>]; <span class="comment">//position effect</span>
00108 
00109   <span class="comment">//determine the scanner related parameters according to </span>
00110   <span class="comment">//the usr's setting</span>
00111   <span class="keywordflow">if</span> (params.resolutionModel.crystalPosition) <span class="comment">//if crystalPosition set</span>
00112     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i =0; i&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>; i++)
00113       positionEffect[i] = 1.0 + 0.005*(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>/2.0-
00114                                        fabs(i-scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>/2.0));
00115   <span class="keywordflow">else</span>                                                                  <span class="comment">//otherwise</span>
00116     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i =0; i&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>; i++)
00117       positionEffect[i] = 1.0;
00118   <span class="keywordflow">if</span> (params.resolutionModel.layer)  <span class="comment">//if layer effect is set</span>
00119     layerEffect = layerEffectEnable;
00120   <span class="keywordflow">else</span><span class="comment">//otherwise</span>
00121     layerEffect = layerEffectDisable;
00122         
00123   efwhmU.init(nLayerSquare,scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>); 
00124   <span class="comment">//full width with half maximum for resFunU    </span>
00125   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nLayerSquare; i++)  <span class="comment">//layer</span>
00126     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>; j++) <span class="comment">//ring</span>
00127       efwhmU(i,j) = params.resolutionModel.FWHM*positionEffect[j]
00128         *layerEffect[i];
00129   <span class="comment">//min and max of FWHM</span>
00130   <span class="keywordtype">float</span> efwhmMax = efwhmU.max();
00131   <span class="keywordtype">float</span> efwhmMin = efwhmU.min();
00132   <span class="comment">//index number of resFunU</span>
00133   numResTableU = floor((efwhmMax-efwhmMin)/Constant::RES_FUN_SAMPLING)+1;<span class="comment">//</span>
00134   resFunU = <span class="keyword">new</span> <a class="code" href="structResolutionTable.html">ResolutionTable</a> [numResTableU]; <span class="comment">//allocate memory</span>
00135   assert(resFunU!=0);
00136   fwhmU.<a class="code" href="classArray1D.html#a8">init</a>(numResTableU);
00137   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iFWHM = 0; iFWHM&lt; numResTableU; iFWHM ++)
00138     fwhmU(iFWHM) = efwhmMin+ iFWHM*Constant::RES_FUN_SAMPLING;
00139   codeIndexU.init(POW2(scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o3">nLayer</a>),scanner-&gt;<a class="code" href="classHRRTScannerParams.html#o12">nRing</a>*2); 
00140   <span class="comment">//full width with half maximum for resFunU</span>
00141 
00142   <span class="keyword">delete</span> positionEffect;
00143 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ResolutionFunction::calculateKernelR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void ResolutionFunction::calculateKernelR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>params</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculation kernel on transaxial direction 
<p>
Implemented in <a class="el" href="classIsoGaussian.html#b1">IsoGaussian</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ResolutionFunction::calculateKernelU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void ResolutionFunction::calculateKernelU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Params &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>params</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
virtual function, calculation kernel on axial direction 
<p>
Implemented in <a class="el" href="classIsoGaussian.html#b3">IsoGaussian</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ResolutionFunction::getCodeIndexR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classArray3D.html">Array3D</a>&lt; short &gt; &amp; ResolutionFunction::getCodeIndexR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get index of resolution functions on transaxial direction 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00016">16</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
<div class="fragment"><pre>00017 {
00018   <span class="keywordflow">return</span> codeIndexR;
00019 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ResolutionFunction::getCodeIndexU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Array2D&lt; short &gt; &amp; ResolutionFunction::getCodeIndexU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get index of resolution functions on axial direction 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00022">22</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
<div class="fragment"><pre>00023 {
00024   <span class="keywordflow">return</span> codeIndexU;
00025 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ResolutionFunction::getResFunR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structResolutionTable.html">ResolutionTable</a> * ResolutionFunction::getResFunR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get resolution functions on transaxial direction 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00004">4</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
<div class="fragment"><pre>00005 {
00006   <span class="keywordflow">return</span> resFunR;
00007 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="ResolutionFunction::getResFunU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structResolutionTable.html">ResolutionTable</a> * ResolutionFunction::getResFunU </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get resolution functions on axial direction 
<p>
Definition at line <a class="el" href="ResolutionFunction_8cpp-source.html#l00010">10</a> of file <a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a>.
<p>
<div class="fragment"><pre>00011 {
00012   <span class="keywordflow">return</span> resFunU;
00013 }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ResolutionFunction_8hpp-source.html">ResolutionFunction.hpp</a><li><a class="el" href="ResolutionFunction_8cpp-source.html">ResolutionFunction.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:50 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
