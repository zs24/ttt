<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: Sinogram.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>Sinogram.hpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef SINOGRAM_HPP</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SINOGRAM_HPP</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#include "Params.hpp"</span>
00004 <span class="preprocessor">#include "Image.hpp"</span>
00005 <span class="preprocessor">#include "EventList.hpp"</span>
00006 <span class="preprocessor">#include "HRRTHouse.hpp"</span>
00007 <span class="preprocessor">#include "Status.hpp"</span>
00008 <span class="preprocessor">#include "FrameInfo.hpp"</span>
00009 <span class="preprocessor">#include "MOLAR.hpp"</span>
00010 
00011 <span class="keyword">class </span>Sinogram
00012 {
00013 <span class="keyword">private</span>:
00014   <span class="keywordtype">int</span> nr, nphi, numSinos;<span class="comment">//dimensions</span>
00015   <span class="keywordtype">float</span> z0Min, z0Max; <span class="comment">//range of z0</span>
00016   <span class="keywordtype">float</span> thetaMin, thetaMax; <span class="comment">//rang of theta</span>
00017   <span class="keywordtype">float</span> rMax; <span class="comment">//range of r</span>
00018   <span class="keywordtype">int</span> type; <span class="comment">//sino type</span>
00019   <span class="comment">//one in "DATA, DELAYED, CORRECTED, EXPECTED, ATTENUATION </span>
00020   <span class="comment">//RANDOMS, SCATTER, and SUBSET_SPECIFIC"</span>
00021   <span class="keywordtype">int</span> verbosity; <span class="comment">//output style</span>
00022   <a class="code" href="structParams_1_1Extensions.html">Params::Extensions</a> ext; <span class="comment">//extension struct to determine the image type</span>
00023   <a class="code" href="classImage.html">Image</a> *sinoGram; <span class="comment">//sinogram image</span>
00024   <a class="code" href="classArray3D.html">Array3D&lt;float&gt;</a> binWeight; <span class="comment">//weight of each bin</span>
00025   string fileName; <span class="comment">//sinogram output file name</span>
00026                 
00027   <span class="comment">//constants for sinogram type</span>
00028   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> DATA = 1;
00029   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> DELAYED = 1;
00030   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> CORRECTED = 2;
00031   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> EXPECTED = 3;
00032   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> ATTENUATION = 4;
00033   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> RANDOMS = 5;
00034   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> SCATTER = 6;
00035   <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> SUBSET_SPECIFIC = 7;
00036                 
00037   <span class="keywordtype">int</span> setSinoGramType(string sType);
00038   <span class="comment">//set int type according to string sType</span>
00039 
00040   <span class="keywordtype">void</span> outPutGeo();<span class="comment">//</span>
00041 
00042   <span class="comment">//rebin using linear intoperlation</span>
00043   <span class="keywordtype">void</span> linearRebin(<span class="keywordtype">float</span> r, <span class="keywordtype">float</span> phi, <span class="keywordtype">float</span> z, 
00044                    <a class="code" href="classEventPacket.html">EventPacket</a> &amp;event, <a class="code" href="classArray3D.html">Array3D&lt;float&gt;</a> &amp;sino);
00045         
00046   <span class="comment">//get the lower bound index of x</span>
00047   <span class="keywordtype">int</span> getIndex(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> xMin, <span class="keywordtype">float</span> xMax, <span class="keywordtype">int</span> nx);
00048         
00049   <span class="comment">//get the weight of x on the index, using linear intoperlation</span>
00050   <span class="keywordtype">float</span> getWeight(<span class="keywordtype">float</span> x, <span class="keywordtype">int</span> xIndex, <span class="keywordtype">float</span> xMin, <span class="keywordtype">float</span> xMax, <span class="keywordtype">int</span> nx);
00051                 
00052   <span class="comment">//get the weight of x on the index, using nearest neighborhood</span>
00053   <span class="keywordtype">float</span> getZWeight(<span class="keywordtype">float</span> x, <span class="keywordtype">int</span> xIndex, <span class="keywordtype">float</span> xMin, <span class="keywordtype">float</span> xMax, <span class="keywordtype">int</span> nx);
00054 <span class="keyword">public</span>:
00055   Sinogram(Params &amp;params); <span class="comment">//constructor</span>
00056   ~Sinogram(); <span class="comment">//destructor</span>
00057   <span class="keywordtype">void</span> generateSino(<a class="code" href="classEventList.html">EventList</a> &amp;eventList, Status &amp; status);
00058   <span class="comment">//float * getSinoAddress() { return &amp;((*sinoGram)(0,0,0));};</span>
00059   <span class="comment">//return the starting address of sinogram image</span>
00060   <span class="keywordtype">int</span> getSinoSize() { <span class="keywordflow">return</span> nr*nphi*numSinos;};
00061   <span class="comment">//return the size of sinogram data</span>
00062   <span class="keywordtype">void</span> getSinoDim(<span class="keywordtype">int</span> &amp;nR, <span class="keywordtype">int</span> &amp;nPhi, <span class="keywordtype">int</span> &amp;NumSinos)
00063   {
00064     nR=nr; nPhi=nphi; NumSinos=numSinos;
00065   }; <span class="comment">//return dimensions of sinogram</span>
00066   <span class="keywordtype">void</span> solveRPhi(<a class="code" href="classEventPacket.html">EventPacket</a> &amp; event, <span class="keywordtype">float</span> &amp; r, <span class="keywordtype">float</span> &amp; phi);
00067   <span class="comment">//solve r and phi for an event</span>
00068   <span class="keywordtype">bool</span> write();
00069   <span class="comment">//write sinogram data to a binary file </span>
00070   <span class="keywordtype">void</span> writeTxt(string fileName);
00071   <span class="comment">//write sinogram data to a txt file</span>
00072   <span class="keywordtype">int</span> reBin(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> xMin, <span class="keywordtype">float</span> xMax, <span class="keywordtype">int</span> nx);
00073 };
00074 
00075 
00076 <span class="preprocessor">#endif //SINOGRAM_HPP   </span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:48 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
