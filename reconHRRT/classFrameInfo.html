<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>reconHRRT: FrameInfo class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>FrameInfo Class Reference</h1><code>#include &lt;<a class="el" href="FrameInfo_8hpp-source.html">FrameInfo.hpp</a>&gt;</code>
<p>
<a href="classFrameInfo-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classFrameInfo.html#a0">writeFrameInfo</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classFrameInfo.html#a1">init</a> ()</td></tr>

<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="e0" doxytag="FrameInfo::getInstance" ></a>
<a class="el" href="classFrameInfo.html">FrameInfo</a> *&nbsp;</td><td class="memItemRight" valign=bottom><b>getInstance</b> ()</td></tr>

<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o0" doxytag="FrameInfo::averageXform" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>averageXform</b> [16]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o1" doxytag="FrameInfo::totalPrompts" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>totalPrompts</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o2" doxytag="FrameInfo::totalDelays" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>totalDelays</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o3" doxytag="FrameInfo::Duration" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>Duration</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o4" doxytag="FrameInfo::startTime" ></a>
string&nbsp;</td><td class="memItemRight" valign=bottom><b>startTime</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o5" doxytag="FrameInfo::nAcceptScanner" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nAcceptScanner</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o6" doxytag="FrameInfo::nRejectScanner" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nRejectScanner</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o7" doxytag="FrameInfo::nAcceptObject" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nAcceptObject</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o8" doxytag="FrameInfo::nRejectObject" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nRejectObject</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o9" doxytag="FrameInfo::nSkip" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nSkip</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o10" doxytag="FrameInfo::nBadEvents" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nBadEvents</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o11" doxytag="FrameInfo::nBadNonEvents" ></a>
long&nbsp;</td><td class="memItemRight" valign=bottom><b>nBadNonEvents</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o12" doxytag="FrameInfo::badSinglesFraction" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>badSinglesFraction</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o13" doxytag="FrameInfo::badTimeTagsFraction" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>badTimeTagsFraction</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o14" doxytag="FrameInfo::timeStampsPerSecond" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>timeStampsPerSecond</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o15" doxytag="FrameInfo::frameStartTimeTag" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>frameStartTimeTag</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o16" doxytag="FrameInfo::totalRandomsEstimate" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>totalRandomsEstimate</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o17" doxytag="FrameInfo::randomsFraction" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsFraction</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o18" doxytag="FrameInfo::randomsFractionDelays" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsFractionDelays</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o19" doxytag="FrameInfo::totalScatterEstimate" ></a>
<a class="el" href="classArray1D.html">Array1D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>totalScatterEstimate</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o20" doxytag="FrameInfo::totalYhatEstimate" ></a>
<a class="el" href="classArray1D.html">Array1D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>totalYhatEstimate</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o21" doxytag="FrameInfo::scatterFraction" ></a>
<a class="el" href="classArray1D.html">Array1D</a>&lt; float &gt;&nbsp;</td><td class="memItemRight" valign=bottom><b>scatterFraction</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o22" doxytag="FrameInfo::totalDecayFactor" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>totalDecayFactor</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o23" doxytag="FrameInfo::totalLiveTimeFactor" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>totalLiveTimeFactor</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o24" doxytag="FrameInfo::averageLivetimeDecay" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>averageLivetimeDecay</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o25" doxytag="FrameInfo::randomsType" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsType</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o26" doxytag="FrameInfo::randomsTau" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsTau</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o27" doxytag="FrameInfo::randomsTauFixed" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsTauFixed</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o28" doxytag="FrameInfo::randomsTauComputed" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsTauComputed</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o29" doxytag="FrameInfo::randomsTauModel" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>randomsTauModel</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o30" doxytag="FrameInfo::avgBlockSingles" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>avgBlockSingles</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o31" doxytag="FrameInfo::measuredEffOffset" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>measuredEffOffset</b></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="o32" doxytag="FrameInfo::computedEffOffset" ></a>
float&nbsp;</td><td class="memItemRight" valign=bottom><b>computedEffOffset</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Frame info class provides the information of a frame <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>duration</em>&nbsp;</td><td>duration of the frame </td></tr>
    <tr><td valign=top><em>startTime</em>&nbsp;</td><td>actual frame start time( hh:mm::ss) from midnight </td></tr>
    <tr><td valign=top><em>nAccept</em>&nbsp;</td><td>number of events accepted by house </td></tr>
    <tr><td valign=top><em>nReject</em>&nbsp;</td><td>number of events rejected by house </td></tr>
    <tr><td valign=top><em>timeStampsPerSecond</em>&nbsp;</td><td>number of time stamps per second </td></tr>
    <tr><td valign=top><em>totalPrompts</em>&nbsp;</td><td>total prompt counts in this frame </td></tr>
    <tr><td valign=top><em>totalDelays</em>&nbsp;</td><td>total delay counts in this frame </td></tr>
    <tr><td valign=top><em>nSkip</em>&nbsp;</td><td>Total number of skipped 32-bit words in the listmode stream </td></tr>
    <tr><td valign=top><em>nBadEvents</em>&nbsp;</td><td>Total number of Bad 64-bit event packets in the listmode stream </td></tr>
    <tr><td valign=top><em>nBadNonEvents</em>&nbsp;</td><td>Total number of Bad 64-bit non-event packets in the listmode stream </td></tr>
    <tr><td valign=top><em>badSinglesFraction</em>&nbsp;</td><td>Missing Singles Tags fraction </td></tr>
    <tr><td valign=top><em>badTimeTagsFraction</em>&nbsp;</td><td>Missing time Tags fraction </td></tr>
    <tr><td valign=top><em>averageXform[16]</em>&nbsp;</td><td>average of 4x4 transformation matrices to map </td></tr>
    <tr><td valign=top><em>totalRandomsEstimate</em>&nbsp;</td><td>Total randoms estimate </td></tr>
    <tr><td valign=top><em>averageLivetimeDecay</em>&nbsp;</td><td>Average livetime_decay across the total events </td></tr>
    <tr><td valign=top><em>totalScatterEstimate</em>&nbsp;</td><td>Total scatter estimate for each iteration </td></tr>
    <tr><td valign=top><em>totalYhatEstimate</em>&nbsp;</td><td>Total yhat estimate for each iteration</td></tr>
  </table>
</dl>
between scanner space and image space 
<p>

<p>
Definition at line <a class="el" href="FrameInfo_8hpp-source.html#l00033">33</a> of file <a class="el" href="FrameInfo_8hpp-source.html">FrameInfo.hpp</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a1" doxytag="FrameInfo::init" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FrameInfo::init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function initializes the frame info data <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>duration</em>&nbsp;</td><td>duration of the frame </td></tr>
    <tr><td valign=top><em>startTime</em>&nbsp;</td><td>actual frame start time( hh:mm::ss) from midnight </td></tr>
    <tr><td valign=top><em>nAccept</em>&nbsp;</td><td>number of events accepted by house </td></tr>
    <tr><td valign=top><em>nReject</em>&nbsp;</td><td>number of events rejected by house </td></tr>
    <tr><td valign=top><em></em>&nbsp;</td><td><p>
</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="FrameInfo_8cpp-source.html#l00117">117</a> of file <a class="el" href="FrameInfo_8cpp-source.html">FrameInfo.cpp</a>.
<p>
References <a class="el" href="MotionCorrection_8hpp-source.html#l00106">MotionCorrection::getAverageTransformation()</a>, <a class="el" href="HRRTScannerParams_8hpp-source.html#l00116">HRRTScannerParams::getInstance()</a>, <a class="el" href="Array1D_8hpp-source.html#l00085">Array1D&lt; float &gt;::init()</a>, <a class="el" href="HRRTHouseList_8hpp-source.html#l00070">HRRTHouseList::motion</a>, <a class="el" href="HRRTHouseList_8hpp-source.html#l00066">HRRTHouseList::stat</a>, <a class="el" href="HRRTHouseList_8hpp-source.html#l00068">HRRTHouseList::time</a>, and <a class="el" href="HRRTScannerParams_8hpp-source.html#l00083">HRRTScannerParams::timeStampsPerSecond</a>.
<p>
<div class="fragment"><pre>00118 {
00119   <a class="code" href="classHRRTHouseList.html">HRRTHouseList</a> &amp;houseList = *HRRTHouseList::getInstance();
00120   Params &amp;params = *Params::getInstance();
00121   <a class="code" href="classHRRTScannerParams.html">HRRTScannerParams</a> &amp;scanner = *<a class="code" href="classHRRTScannerParams.html#e0">HRRTScannerParams::getInstance</a>();
00122 
00123   this-&gt;Duration = houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration;  <span class="comment">//in milli seconds</span>
00124   this-&gt;totalPrompts = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nPrompt;
00125   this-&gt;totalDelays = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nRandom;<span class="comment">//random by delayed time window</span>
00126   this-&gt;nAcceptScanner = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nAccept;
00127   this-&gt;nRejectScanner = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nReject;
00128   this-&gt;nSkip = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nSkip;
00129   this-&gt;nBadEvents = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nBadEvents;
00130   this-&gt;nBadNonEvents = houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nBadNonEvents;
00131   <span class="keywordflow">if</span>(houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nS &lt; houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration)
00132       this-&gt;badSinglesFraction = (houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration - houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nS) 
00133                                 / (<span class="keywordtype">float</span>) houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration;
00134   <span class="keywordflow">else</span> 
00135       this-&gt;badSinglesFraction = 0.0;
00136   <span class="keywordflow">if</span>(houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nT &lt; houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration)
00137       this-&gt;badTimeTagsFraction = (houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration - houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nT) 
00138                                 / (<span class="keywordtype">float</span>)houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.duration;
00139   <span class="keywordflow">else</span> 
00140       this-&gt;badTimeTagsFraction = 0.0;
00141   
00142   this-&gt;frameStartTimeTag = houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.frameStartTimeTag;
00143   nAcceptObject = nAcceptScanner;
00144   nRejectObject = 0; 
00145   <span class="keywordtype">int</span> startTime = (houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.studyStartTime + 
00146                    houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.frameStartTimeTag)/1000;
00147   <span class="keywordtype">int</span> hours, minutes, seconds;
00148   hours = startTime/3600;
00149   minutes = (startTime - hours*3600)/60;
00150   seconds = startTime - hours*3600 - minutes*60;
00151   <span class="comment">//get average motion transform matrix</span>
00152   <span class="keywordflow">if</span>(params.motionCorrection.enable)
00153     houseList.<a class="code" href="classHRRTHouseList.html#r8">motion</a>-&gt;<a class="code" href="classMotionCorrection.html#a4">getAverageTransformation</a>(this-&gt;averageXform);
00154   <span class="keywordflow">else</span>
00155     memset(this-&gt;averageXform,0,<span class="keyword">sizeof</span>(this-&gt;averageXform));
00156   stringstream ss;
00157   ss&lt;&lt;setfill(<span class="charliteral">'0'</span>)&lt;&lt;setw(2)&lt;&lt;hours&lt;&lt;<span class="stringliteral">":"</span>&lt;&lt;setfill(<span class="charliteral">'0'</span>)&lt;&lt;setw(2)&lt;&lt;minutes&lt;&lt;<span class="stringliteral">":"</span>
00158     &lt;&lt;setfill(<span class="charliteral">'0'</span>)&lt;&lt;setw(2)&lt;&lt;seconds;
00159   this-&gt;startTime = ss.str();
00160   this-&gt;timeStampsPerSecond = scanner.<a class="code" href="classHRRTScannerParams.html#o24">timeStampsPerSecond</a>;
00161   <span class="keywordflow">if</span>(params.frame.verbosity&gt;=5) {
00162     cout&lt;&lt;<span class="stringliteral">"Study start time "</span>&lt;&lt;houseList.<a class="code" href="classHRRTHouseList.html#r7">time</a>.studyStartTime&lt;&lt;endl;
00163     cout&lt;&lt;<span class="stringliteral">"Actual start time "</span>&lt;&lt;startTime&lt;&lt;endl;
00164     cout&lt;&lt;hours&lt;&lt;<span class="stringliteral">":"</span>&lt;&lt;minutes&lt;&lt;<span class="stringliteral">":"</span>&lt;&lt;seconds&lt;&lt;endl;
00165     cout&lt;&lt;this-&gt;startTime&lt;&lt;endl;
00166   }
00167 
00168   totalDecayFactor = static_cast&lt;float&gt; (houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nDecayFactor);
00169   totalLiveTimeFactor = static_cast&lt;float&gt; (houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nLiveTimeFactor);
00170   <span class="keywordtype">float</span> totalLiveTime_Decay = static_cast&lt;float&gt; (houseList.<a class="code" href="classHRRTHouseList.html#r5">stat</a>.nLiveTime_Decay);
00171   this-&gt;averageLivetimeDecay = totalLiveTime_Decay/this-&gt;nAcceptScanner;
00172 
00173   randomsFraction = 0.0;
00174   scatterFraction.<a class="code" href="classArray1D.html#a8">init</a>(params.algorithm.numIterations+1); 
00175   totalScatterEstimate.<a class="code" href="classArray1D.html#a8">init</a>(params.algorithm.numIterations+1); 
00176   totalYhatEstimate.<a class="code" href="classArray1D.html#a8">init</a>(params.algorithm.numIterations+1); 
00177 
00178   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0 ; i &lt; params.algorithm.numIterations+1; i++) {
00179      scatterFraction(i) = 0.0;
00180      totalScatterEstimate(i) = 0.0;
00181      totalYhatEstimate(i) = 0.0;
00182   }
00183   
00184 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="FrameInfo::writeFrameInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FrameInfo::writeFrameInfo </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function creates and writes FrameInfo file 
<p>
Definition at line <a class="el" href="FrameInfo_8cpp-source.html#l00010">10</a> of file <a class="el" href="FrameInfo_8cpp-source.html">FrameInfo.cpp</a>.
<p>
References <a class="el" href="Log_8hpp-source.html#l00079">Log::getLog()</a>, and <a class="el" href="Log_8hpp-source.html#l00052">Log::outputMessage()</a>.
<p>
Referenced by <a class="el" href="MOLAR_8cpp-source.html#l00292">MOLAR::boundaryCheckingFwdProject()</a>, and <a class="el" href="Algorithm_8cpp-source.html#l00408">Algorithm::collectEstimates()</a>.
<p>
<div class="fragment"><pre>00011 {
00012   Params &amp;params = *Params::getInstance();
00013   
00014   string fileName = params.frame.frameDirectory+<span class="stringliteral">"/"</span>+
00015     params.frame.outputFileNameBase+<span class="stringliteral">"."</span>+ params.extensions.frameInfo;
00016   ofstream osFrameInfo(fileName.c_str());
00017   <span class="keywordflow">if</span>(!osFrameInfo){
00018     <a class="code" href="classLog.html">Log</a> * log = <a class="code" href="classLog.html#e0">Log::getLog</a>();
00019     string msg = <span class="stringliteral">"Warning: Error in openning frameInfo file"</span>;
00020     log-&gt;<a class="code" href="classLog.html#a2">outputMessage</a>(msg, FRAME, 0);
00021     <span class="keywordflow">return</span>;
00022   }
00023   osFrameInfo &lt;&lt; <span class="stringliteral">"# Total prompts and delays "</span> &lt;&lt; endl;
00024   osFrameInfo&lt;&lt;this-&gt;totalPrompts&lt;&lt;<span class="stringliteral">" "</span>
00025              &lt;&lt;this-&gt;totalDelays&lt;&lt;endl;
00026   osFrameInfo &lt;&lt; <span class="stringliteral">"# Actual frame duration"</span> &lt;&lt; endl;
00027   osFrameInfo&lt;&lt;this-&gt;Duration&lt;&lt;endl;
00028   osFrameInfo&lt;&lt; <span class="stringliteral">"# Frame start time"</span> &lt;&lt; endl;
00029   osFrameInfo&lt;&lt;this-&gt;startTime&lt;&lt;endl;
00030   osFrameInfo &lt;&lt; <span class="stringliteral">"# Number of event accepted and rejected based on scanner geometry"</span> 
00031               &lt;&lt; endl;
00032   osFrameInfo&lt;&lt;this-&gt;nAcceptScanner&lt;&lt;endl&lt;&lt;this-&gt;nRejectScanner&lt;&lt;endl;
00033   osFrameInfo &lt;&lt; <span class="stringliteral">"# Number of event accepted and rejected based on boundary check"</span> 
00034               &lt;&lt; endl;
00035   osFrameInfo&lt;&lt;this-&gt;nAcceptObject&lt;&lt;endl&lt;&lt;this-&gt;nRejectObject&lt;&lt;endl;
00036   osFrameInfo &lt;&lt; <span class="stringliteral">"# Number of bad 64-bit events"</span> 
00037               &lt;&lt; endl;
00038   <span class="keywordtype">float</span> badEvents = (this-&gt;nSkip/2.0) + this-&gt;nBadEvents;
00039   osFrameInfo&lt;&lt;badEvents&lt;&lt;endl;
00040   osFrameInfo &lt;&lt; <span class="stringliteral">"# Missing Singles Tags Fraction &amp; missing TimeTags Fraction"</span> 
00041               &lt;&lt; endl;
00042   osFrameInfo &lt;&lt; this-&gt;badSinglesFraction &lt;&lt; <span class="stringliteral">" "</span> 
00043               &lt;&lt; this-&gt;badTimeTagsFraction &lt;&lt; endl;           
00044   osFrameInfo &lt;&lt; <span class="stringliteral">"# Average motion correction transformation matrix"</span> 
00045               &lt;&lt; endl;
00046     <span class="comment">// matrix is organized by columns, output by top 3 rows</span>
00047    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;3; i++) {
00048     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;4; j++) {
00049      osFrameInfo&lt;&lt;this-&gt;averageXform[i+4*j]&lt;&lt;<span class="stringliteral">" "</span>;
00050     }
00051    }
00052 
00053   osFrameInfo &lt;&lt;endl&lt;&lt;<span class="stringliteral">"# Average Decay Factor"</span>&lt;&lt;endl;
00054   osFrameInfo&lt;&lt;(this-&gt;totalDecayFactor / this-&gt;nAcceptScanner)&lt;&lt;endl;
00055   osFrameInfo &lt;&lt;<span class="stringliteral">"# Average LiveTimeFactor "</span>&lt;&lt;endl;
00056   osFrameInfo&lt;&lt;(this-&gt;totalLiveTimeFactor / this-&gt;nAcceptScanner)&lt;&lt;endl;
00057   osFrameInfo &lt;&lt;<span class="stringliteral">"# Average Livetime_Decay"</span> 
00058               &lt;&lt; endl;
00059   osFrameInfo&lt;&lt;this-&gt;averageLivetimeDecay&lt;&lt;endl;
00060   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Correction Type: (0==fixed, 1=computed, 2=modeled)"</span>
00061               &lt;&lt; endl;
00062   osFrameInfo&lt;&lt;this-&gt;randomsType&lt;&lt;endl;
00063   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Tau actually used"</span>
00064               &lt;&lt; endl;
00065   osFrameInfo&lt;&lt;this-&gt;randomsTau&lt;&lt;endl;
00066   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Tau from params"</span>
00067               &lt;&lt; endl;
00068   osFrameInfo&lt;&lt;this-&gt;randomsTauFixed&lt;&lt;endl;
00069   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Tau computed from delays"</span>
00070               &lt;&lt; endl;
00071   osFrameInfo&lt;&lt;this-&gt;randomsTauComputed&lt;&lt;endl;
00072   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Tau from empirical model"</span>
00073               &lt;&lt; endl;
00074   osFrameInfo&lt;&lt;this-&gt;randomsTauModel&lt;&lt;endl;
00075   osFrameInfo &lt;&lt;<span class="stringliteral">"# Average block singles"</span>
00076               &lt;&lt; endl;
00077   osFrameInfo&lt;&lt;this-&gt;avgBlockSingles&lt;&lt;endl;
00078   osFrameInfo &lt;&lt;<span class="stringliteral">"# Measured detector efficiency offset (from delays to norm extrapolated to 0 singles)"</span>
00079               &lt;&lt; endl;
00080   osFrameInfo&lt;&lt;this-&gt;measuredEffOffset&lt;&lt;endl;
00081   osFrameInfo &lt;&lt;<span class="stringliteral">"# Computed detector efficiency offset (from blockSingles)"</span>
00082               &lt;&lt; endl;
00083   osFrameInfo&lt;&lt;this-&gt;computedEffOffset&lt;&lt;endl;
00084 
00085   osFrameInfo &lt;&lt;<span class="stringliteral">"# Randoms Fraction from Delays"</span>
00086               &lt;&lt; endl;
00087   osFrameInfo&lt;&lt;this-&gt;randomsFractionDelays&lt;&lt;endl;
00088   osFrameInfo &lt;&lt;<span class="stringliteral">"# Total Randoms Estimate"</span>
00089               &lt;&lt; endl;
00090   osFrameInfo&lt;&lt;this-&gt;totalRandomsEstimate&lt;&lt;endl;
00091 
00092   Status *status = Status::getStatus();
00093   <span class="keywordtype">int</span> numIter = (status-&gt;iter &gt;= params.algorithm.numIterations)?
00094                      params.algorithm.numIterations:status-&gt;iter;
00095   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0 ; i &lt; numIter; i++) {
00096      osFrameInfo &lt;&lt; <span class="stringliteral">"# Total Scatter Estimate for iteration: "</span>&lt;&lt;(i+1)
00097               &lt;&lt; endl;
00098      osFrameInfo&lt;&lt;this-&gt;totalScatterEstimate(i)&lt;&lt;endl;
00099      osFrameInfo &lt;&lt; <span class="stringliteral">"# Total Yhat Estimate for iteration: "</span>&lt;&lt;(i+1)
00100               &lt;&lt; endl;
00101      osFrameInfo&lt;&lt;this-&gt;totalYhatEstimate(i)&lt;&lt;endl;
00102      osFrameInfo &lt;&lt; <span class="stringliteral">"# Randoms Fraction"</span>
00103               &lt;&lt; endl;
00104      osFrameInfo&lt;&lt;this-&gt;randomsFraction&lt;&lt;endl;
00105      osFrameInfo &lt;&lt; <span class="stringliteral">"# Scatter Fraction for iteration: "</span>&lt;&lt;(i+1)
00106               &lt;&lt; endl;
00107      osFrameInfo&lt;&lt;this-&gt;scatterFraction(i)&lt;&lt;endl;
00108   }
00109 
00110   osFrameInfo.close();
00111 }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="FrameInfo_8hpp-source.html">FrameInfo.hpp</a><li><a class="el" href="FrameInfo_8cpp-source.html">FrameInfo.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Dec 13 14:13:49 2007 for reconHRRT by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
